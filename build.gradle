apply plugin: 'groovy'
apply plugin: 'application'
apply plugin: 'idea'
apply from: 'gradle/cucumber.gradle'

task wrapper(type: Wrapper)

repositories {
    mavenCentral()
}

test {
//    useTestNG()
}

ext {
    libs = [
            'maven-shared-utils': 'org.apache.maven.shared:maven-shared-utils:0.3',
            groovy: 'org.codehaus.groovy:groovy:2.1.6',
            hamcrest: 'org.hamcrest:hamcrest-library:1.3',
            jcommander: 'com.beust:jcommander:1.30',
            junit: 'junit:junit:4.11',
            spock: 'org.spockframework:spock-core:0.7-groovy-2.0',
            testng: 'org.testng:testng:6.8',
    ]
}

dependencies {
    compile libs.groovy
    compile libs.jcommander
    compile libs.'maven-shared-utils'

    testCompile(libs.spock) {
        exclude group: 'org.codehaus.groovy', module: 'groovy-all'
        exclude group: 'junit', module: 'junit-dep'
    }
    testCompile libs.hamcrest
    testCompile libs.testng
    // force junit version, as testng comes with a junit version which is has bloated dependencies
    testCompile libs.junit
}

applicationName = 'pipe'
mainClassName = 'nl.ikoodi.pipeline.cli.Pipeline'
